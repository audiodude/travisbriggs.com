<!DOCTYPE html>
<html lang="en">

<head>
  {% include 'head.html' %}
</head>

<body>
  <header class="page-header">
    <a class="h-card" href="/" class="page-header__logo" title="Go home">
      <img src="/assets/avatar.jpg" alt="Travis Briggs" width="48"/>
      <span style="display:none">Travis Briggs</span>
    </a>

    <nav>
      <a href="/garden/">Garden</a>
      <a href="/garden/about">About Me</a>
      <a href="/now">Now</a>
      <button id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
        <span class="theme-toggle-icon">◐</span>
      </button>
    </nav>
  </header>
  <main>{{content}}</main>

  <footer class="page-footer">
    <div style="font-size: 0.75rem">
      <p class="copyright">Copyright © {% year %} {{site.author}}</p>
      <p class="copyright">
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License"
            style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work and
        all contents of this website are licensed under
        a<br />
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike
          4.0 International
          License</a>.
      </p>
    </div>
  </footer>

  <script>
    // Theme toggle functionality
    (function() {
      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;
      const body = document.body;

      // Check for saved theme preference or default to system preference
      const getPreferredTheme = () => {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
          return savedTheme;
        }
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      };

      // Apply theme
      const applyTheme = (theme) => {
        if (theme === 'dark') {
          body.classList.remove('light-theme');
          body.classList.add('dark-theme');
        } else {
          body.classList.remove('dark-theme');
          body.classList.add('light-theme');
        }
        localStorage.setItem('theme', theme);
      };

      // Initialize theme on page load
      const currentTheme = getPreferredTheme();
      applyTheme(currentTheme);

      // Toggle theme on button click
      themeToggle.addEventListener('click', () => {
        const currentTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        applyTheme(newTheme);
      });

      // Listen for system theme changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        if (!localStorage.getItem('theme')) {
          applyTheme(e.matches ? 'dark' : 'light');
        }
      });
    })();
  </script>
</body>

</html>